version: 2
jobs:
  build:
    docker:
      - image: circleci/node:latest
    working_directory: ~/repo
    branches:
      only:
        - dev-change-to-2019
    steps:
      - checkout
      - run:
          name: Npm install (node_modules directory)
          command: npm install
      - run:
          name: Git config user.email command
          command: git config --global user.email "contact@conference-agile.org"
      - run:
          name: Git config user.name command
          command: git config --global user.name "AgileFrance deployment bot"
      - add_ssh_keys:
          fingerprints:
            - "80:b8:43:4e:22:81:b4:0a:0e:c4:bc:0f:08:b9:76:52"
      - deploy:
          name: Deployment by gulp deploy task
          command: npm run deploy